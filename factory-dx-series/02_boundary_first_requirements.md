境界から始めるDX要件定義
（工場DXアーキテクチャ　実践編 1/10）
工場DXの現場では、次のような“よくある崩壊パターン”が繰り返し起きています。

【表：現場で実際に起きている“症状”】
	• 工場データを集めたのに、まったく使われない
	• 導入時は動いていたのに、数ヶ月後にシステムがフラフラし始める
	• やがて、データを変えたいのにどこを直せばよいか誰も分からない
	• 組織や設備の変化にどう対応すべきか分からなくなる
	• システム価値が急速に低下する
	• 最終的に「よくわからないものは危ない」と判断され、現場で廃止される
これが、多くの工場DXで静かに起きている“現実”です。

【裏：実はその背後で静かに起きている“境界の問題”】
	• 意味の境界がない
　→ どこで“意味”に変換すべきか定義されていない
	• 揃わなさの境界が曖昧
　→ 設備差・工場差を吸収するレイヤーが存在しない
	• 意味付けレイヤーが分散
　→ データ変更時に“どこを誰が触るべきか”判断できない
	• 制御の境界を越境
　→ OT側が安全確保のため“システムを剥がす”判断を下す
	• 変更耐性の境界がない
　→ 現場改善や組織変更のたびにシステム構造が崩れる

ここに共通している問題は一つです。

◆ DXの崩壊は、最初に“複合的な境界”を設計しなかったことが原因
工場DXの失敗は、技術力の不足でも、現場運用の失敗でもありません。

最初に、技術の境界・データの境界・要件を決める人の境界・責任の境界——
これらを揃えて設計していなかったことが、本質的な構造問題です。

境界が曖昧なまま作られたシステムは、
最初は動いても、変化のたびにフラフラし、
やがて OT側が安全のために機構ごと“剥がす”という最悪の結末に向かいます。

◆ 境界を設計できる唯一のタイミングが「要件定義」である
工場システムは、導入した瞬間から
設備・組織・工法・安全ルール・改善──あらゆる変化の波を受け続けます。
導入後に“境界”を作り直すことはできません。

境界を正しく設計し、
システムが 価値を失わずに変化へ耐え続ける ようにできるのは、要件定義だけ です。

要件定義とは、
	• どこで意味付けを行うのか
	• どこで差異を吸収するのか
	• どこに触れてはいけないのか
	• 誰が何を決めるのか
	• 変更と維持に耐える構造をどう設計するか
といった 長期の価値を支える“境界”を決める工程 にほかなりません。

◆ 結論：境界を定めた要件定義だけが、工場DXを持続させる
境界が曖昧なシステムはどれだけ技術を投入しても、必ず数ヶ月〜数年後に崩れます。
境界を明確にした要件定義で、壊れず・剥がされず・価値を出し続ける工場DX を実現します。

次回（2/10）は、
OTの世界を読み解き“境界を見抜く”ための 「構造レンズ」 を紹介します。

OTを読むための「構造レンズ」
（工場DXアーキテクチャ　実践編 　2/10）

第1話では、工場DXが失敗する根本原因の一つに
境界を設計しないままプロジェクトが始まること と述べました。
ではその境界は、どうやって“見える”ようになるのか。
その答えが 「OTを点でなく、構造で読む」 という視点です。

◆ ITとOTでは、“点”の意味が決定的に違う
IT/Webの世界では、対象はほぼ「人」です。
購買データが1万点といえば、すべてが“購買行動”を意味し、
点が増えても同種の意味で揃っています。

しかし工場データの1万点はまったく違います。
そこに含まれるのは：
	• 温度
	• 圧力
	• 電流
	• 工程ステップ
	• 許可条件
	• アラーム
	• 補正値
…
同じ“1点”でも、意味も役割も前提もすべて異なる。
設備・工程・制御ロジックという“文脈”がなければ、点は意味を持ちません。

◆ OT関係者は“構造”を意識してデータを見ている
OTにとって、点は単なる値ではなく、
「設備のどの構造の上に乗っているか」 が常に議論の前提です。
	• この温度はどの工程の温度か
	• このアラームはどの制御遷移の中で意味を持つか
	• このON信号はどのインターロックと関係するか
	• この流量はどの動作の意図に属するのか

OTの会話はすべて 構造の理解 の上に成立しています。
逆に、構造を知らずに点だけ見始めると、
意味が揃わず、整備できず、境界も見えず、
第1話のような崩壊パターンに必ず向かいます。

◆ 工場を正しく読むための「3つの構造レンズ」
OTの世界はデータの内容、詳細ではなく、
“見る順番”を変えれば一気に読み解けます。
そのためのレンズがこちらの3つです。

① 制御構造レンズ（Control Structure Lens）
PLCがどんな状態遷移で動き、どの許可条件で設備が動作し、
SCADAが何を“見せていて”何を“制御していない”のか。
このレンズで、触れてはいけない境界（OTの不可侵領域） が見える。

② 設備構造レンズ（Equipment Structure Lens）
工場は階層構造でできている：
	• 設備
	• 装置
	• 部位
	• 要素
	• 点
そのどこに属する値なのかで、データの意味付け（Meaning Layer） が決まる。
このレンズがないと、データは用途を持てない。

③ データ構造レンズ（Data Structure Lens）
点が構造を持つ以上、データも構造を持つ。
	• 流れ（時系列）
	• 意味（属性）
	• 状態（モード・アラーム）
	• 差異吸収（Edge）
ここからRDB/TSDBの分離、Edgeの役割、揃わなさの扱い
といった境界が自然に浮かび上がる。

◆ レンズを通すと、境界の位置が勝手に見えてくる
構造レンズの視点でデータを見ると
	• これは制御に残すべき値
	• これはEdgeで意味付けすべき値
	• これはRDB（意味）に置くべき属性
	• これはTSDB（流れ）で扱うべき時系列
	• これはSCADAに持たせてはいけない状態
境界を“感覚や経験”ではなく、構造として判定できる ようになります。

これが第1話で述べた「境界を設計できるのは、要件定義だけ」を実践可能にする基盤です。

◆ 第2話のまとめ
	• ITと工場では「点」の意味が根本的に違う
	• 工場データは点ではなく、設備・制御・工程という構造体
	• OTは必ず構造を意識してデータを見ている
	• OA/ITは“点で世界を見て”失敗する
	• 3つの構造レンズによって、境界が自然に浮かび上がる
	• 境界を正しく設計するための“前提知識”がここで揃う
	
次回（3/10）
工場データ要件の本質 —— タグ・意味付け・構造化をどう定義するか

工場データ要件の本質
—— タグ・意味付け・構造化をどこで、どう定義するのか
（工場DXアーキテクチャ　実践編 　3/10）

工場DXの現場では、
「データ要件が曖昧なままプロジェクトが進む」ことが、
後半の崩壊をほぼ決定づけます。

では工場データの要件とは何か？

結論はシンプルです
	工場データは意味を持って初めて価値になる。
	その“意味”は、設備・工程・制御という構造から決まる。

◆ 多くのDXプロジェクトがつまずく“IT型データ収集フロー”
OTを知らないまま工場データに入ると、多くのプロジェクトはこの流れを辿ります。

① まず「欲しい成果」から始まる（分析・AI・可視化）
	• 予兆検知
	• 歩留まり改善
	• 稼働率向上
	• AI分析
目的から入るのは自然ですが、
ここで ITの成功体験（スキーマ先行） が発動します。

② 成果に必要そうな“データスキーマ”を先に作ってしまう
	• このテーブルがあれば分析できそう
	• この項目があればAIが学習できる
	• 時系列で取れればなんとかなる
しかしこの時点で、
そのスキーマが“工場に存在するデータ構造と無関係” であることに気づいていません。

③ 周囲のシステムから“欲しいデータ”をかき集めようとする
	• 先行でデータ収集している他OAシステムにないか？
	• SCADAから取れますか？
	• MESにデータありませんか？
	• PLCから読めますか？


④ 現場に行ってみると、IT的に作ったスキーマと現実が一致しない
なぜ一致しないのか？　理由は明確です

工場データの“点”は、設備・工程・制御という構造の一部だから。
	• 温度は工程の文脈で意味が変わる
	• アラームは制御ロジックと対で存在する
	• ON/OFFはインターロックの関係で意味が決まる
	• 工場ごとに構造が異なるため“揃わないのが当たり前”
つまり 点を点として扱うIT発想では意味が見えない。

⑤ 最終的に「PLCと通信しよう」「今回用のEdgeを置こう」になる
しかしこの時点でもまだ“点”を取りに行くため、
	• 意味が揃わず
	• 構造が読めず
	• 工場差が吸収できず
	• どこを触れば正しく変わるか分からず
	• 用途に使えないデータの山ができる

 第1話で説明した崩壊パターンに直結します。

他のOAシステムからもらったデータも”点”データとして扱いがちです

◆ 工場データは「意味」から設計しなければ崩れる
工場データのタグは名前ではなく、
設備・工程・制御の“意味の構造体” です。

例：LT101 は名前ではなく、意味そのもの：
	• どの設備の
	• どの部位にある
	• どの状態遷移で参照され
	• どのインターロックに関係し
	• どの工程の正常値を示すか
工場データは、意味 → タグ → 構造化 の順で定義しなければ成り立ちません。

◆ 意味付けをどこで行うかが“境界”を決める
工場データの意味付けには、3つの選択肢があります。

① OT側（PLC/SCADA）で意味付け
意味が強固になるが、変更が重く、安全領域と衝突しやすい。
→ 制御の境界に触れがち。

② Edgeで意味付け（もっとも合理的）
工場差・設備差・命名揺れを吸収し、
IT側が扱える形に変換する“境界レイヤ”として最適。
→ 意味の境界・揃わなさの境界を担う。

③ IT側で意味付け（失敗の典型）
設備構造を知らずに意味付けしようとして破綻する。
→ 境界が見えない状態でタグに意味を載せようとする。

結論：
	どこで意味付けをするか＝どこに境界を置くかである。
	工場データの要件は境界設計そのもの。

◆ 工場データ要件は“意味 → タグ → 構造”で決まる
よく行われる“目的 → スキーマ → 収集”の順番では、工場データは揃いません。

成立する順番はこちらです
	1. 意味を定義する（What / Why）
	2. 意味体系に沿ってタグを設計する（Name as Structure）
	3. タグ体系からデータ構造を作る（Modeling）
	4. 構造を支えるための役割分離（RDB/TSDB/Edge）を行う

意味がなければタグは作れず、
タグがなければ構造化できず、
構造化できなければデータは用途に耐えません。

◆ 第3話のまとめ
	• 工場データの価値は“意味”から生まれる
	• IT型の「目的→スキーマ→収集」は工場では破綻する
	• 工場データの点は構造に依存しており、点だけ集めても意味にならない
	• タグは名前ではなく“意味の構造体”
	• 意味付けをどこで行うかが境界を決める
	• 工場データ要件は 意味 → タグ → 構造 の順で定義すべき
	• この基盤がないと、第4話の「揃わなさのデザイン」は成立しない

次回（4/10）
プロトコル選定と“揃わなさのデザイン”
—— 工場は揃わない前提で作る

プロトコル選定と“揃わなさのデザイン”
—— 工場は揃わない前提で作る
（工場DXアーキテクチャ　実践編 　4/10）

工場DXでよく誤解されるテーマに「プロトコル選定」 があります。

ITの常識では、プロトコルは“技術仕様の違い”です。
RESTか、gRPCか、MQTTか、HTTPか。
用途に応じて選べばよい。
しかし工場ではまったく意味が違います。
　プロトコル選定とは、工場の“揃わなさ”を
　どこで吸収するか（境界）を設計すること。

◆ 工場が揃うことはない。
——歴史・構造・工程が生み出す“揃わなさ”が前提条件
工場には次のような違いが必ず存在します。
	• 設備年式の違い
	• メーカーの違い
	• PLCアドレス体系の違い
	• 制御思想や工程構造の違い
	• 現場改善の歴史
	• ネットワーク境界の違い

これは工場の怠慢ではなく、
工場というシステムが本質的にもつ“揃わなさ” です。
どれだけITが頑張っても、「全部統一」は原理的にできません。
だから大切なのは、揃わない前提でどこで揃えるかを設計すること です。

◆ プロトコル選定は“技術”ではなく“境界”の話
工場DXの初心者がやりがちなのは、
	• 「OPC-UAで統一すれば良いですよね？」
	• 「MQTTで吸い上げれば標準化できますよね？」
という“IT的統一発想”。

しかし、工場では統一できません。
理由はシンプルです
　プロトコルは技術で決まるのではなく、
　工場の領域（エリア）で自然に分かれているから。
工程、制御、配置、通信範囲──
工場は “領域のまとまり” を持っており、
この境界がそのまま通信の境界になります。

だからプロトコルを統一しようとすると壊れる。

◆ プロトコル変換はソフトでもできる。
——しかし長期運用を考えると Edge が必須になる
変換だけならソフトでも動きます。
市販の変換ソフトでも実現できます。

しかし工場システムは 10〜20年スパンで動くのが前提 です。
	• OS更新
	• PC更新
	• 保守切れ
	• 長期連続稼働
	• 設備更新の影響

これらを考えると、
　短期ならソフトでも動く。
　長期運用に耐えるのは“装置としてのEdge”だけ。

Edgeは「変換ソフトの代わり」ではなく、
長期運用の継続性（Continue）を担保するレイヤ なのです。

◆ Edgeとは“工場のどの領域を担当するか”を決める装置
Edgeの範囲設計は誤解されがちです。
	• 何個のPLCをつなぐか
	• どのプロトコルを受けるか
そういう技術要件ではありません。

本質はEdgeがどの“工場領域”をひとまとまりとして扱うかを決めること。

工場にはどこでも、自然な領域のまとまりがあります。
	• 運転単位としてのまとまり
	• 管理単位としてのまとまり
	• 意味が成立する単位のまとまり
	• 通信が届く範囲のまとまり

Edgeはその“まとまり”を受け持つ存在です。

◆ Edgeは単一故障点になる
——だから“どの領域をまとめるか”が要件定義そのもの
Edgeは配下の領域を一括で扱うため、
止まればその領域全体が見えなくなる。

つまり、最初に決めるべきはこれです：
　A領域とB領域を1台のEdgeでまとめる？
　それとも分ける？
	• まとめれば1台で済む
	• だが止まれば A も B も同時に消える
これを許容するかどうかは 運用側の要件 です。

逆に、A と B を独立させたいなら、EdgeもA/Bで分ける必要がある。
これは技術論ではなく、
　どの領域が止まっても許容できるか
　どの領域は独立して動く必要があるか
という 業務要件の話 です。

Edgeは、この領域分割の上に初めて設計できます。

◆ 第4話のまとめ
	• 工場は揃わない前提で設計する
	• プロトコルは“技術”ではなく“境界”で決まる
	• 変換はソフトでもできるが、長期運用はEdge
	• Edgeは“工場領域を受け持つ”装置である
	• だから、どの領域をどう分けるかが要件定義の本丸
	• ここが決まらないと、意味付け（#3）も、流れ（#6）も成立しない

次回（5/10）
Edge設計の本質 —— 正規化・差異吸収・意味変換
“工場の揃わなさを価値に変える唯一のレイヤ”

Edge設計の本質
—— 正規化・差異吸収・意味変換
（工場DXアーキテクチャ　実践編 　5/10）

Edge（エッジ）は、工場DXにおいて最も誤解されているレイヤです。
	• ITからは「ゲートウェイ装置」
	• OTからは「余計な中間装置」
と見られがちです。

しかし実際には、工場DXの成否の大部分を左右する“境界レイヤ”が Edge です。

理由は明確です。
　工場の揃わなさ × 意味 × 流れを
　ひとつのレイヤで扱えるのは Edge しかない。

◆ Edge設計のスタート地点は「技術」ではない
——まず“どの領域（エリア）を担当させるか”を決める
Edgeの設計は、通信方式でも、PLCの台数でも、スペックでもありません。

最初に決めるべきはただひとつ：
	Edgeがどの工場領域（エリア）をひとまとまりとして扱うのか。

工場には必ず、規模に関わらず「自然なまとまり」が存在します。
	• 運転単位としてまとまるエリア
	• 工程として意味が成立するエリア
	• 管理・保全の単位として分かれるエリア
	• 通信が届く範囲として自然に分かれるエリア
この「領域の切り方」は技術ではなく、
工場という“場”が持つ普遍的な構造 です。

Edgeとは、この“領域”を受け持つための装置です。

◆ Edgeは単一故障点になる
——だから領域の切り方は技術ではなく“要件”で決める
Edgeは、その配下のデータを“一括で扱う”装置です。
つまり
	Edgeが止まると、その領域がまとめて見えなくなる。
これは危険性ではなく 設計上の前提条件 です。

だからこそ、最初の要件は次のような問いになります。
	• この2つの領域を1台でまとめてもよいのか
	• 片側だけ独立させたいのか
	• 止まってよい“まとまり”はどこか
	• 同時停止を許容できる境界はどこか
これらはすべて 業務要件 です。

技術設計の前に、
領域という“工場側のまとまり”をどう扱うか が決まらないと
Edgeの設計はまったく進みません。

◆ そしてもうひとつ——
Edge設計で絶対に外してはならない決定がある
「誰が Edge をメンテナンスするのか」
これは OT/IT どちらにも語られにくいですが、
工場DXの成功率を決める最大の要因です。

Edgeは設置したら終わりではありません。
	• 正規化の調整
	• 設定の更新
	• 施設側改善への追従
	• 設備更新時の差異吸収
	• バージョン管理
	• 監視・復旧の担当
	• 意味定義の改訂
継続的な手入れが必ず必要 です。

だからこそ、次の問いが最重要になります。
	この Edge を、誰がメンテナンスするのか？

これが曖昧なプロジェクトは、
ほぼ例外なく数ヶ月〜数年で破綻します。

◆ メンテ担当が誰かによって、Edgeの構造も責務も変わる
● OTが担当するなら
	• UIは直感的であるべき
	• フィールド改善への追従が重視
	• 動作優先・復旧容易性重視
	• 現場判断で触れるように設計
● ITが担当するなら
	• 自動化・リモート管理が重視
	• ログ・監視・冗長化が前提
	• デプロイ・構成管理が必要
	• セキュリティが強く要求される
● 両者が担当しないなら → 破綻確定
	• 設定変更の誰責が曖昧
	• 設備改善に追従できない
	• 障害復旧が進まない
	• 意味付けが更新されず陳腐化
	• 結果として Edge は“剥がされる”

◆ 領域（スコープ）
→ メンテ担当（責任）
→ 意味（セマンティクス）
→ 技術（プロトコル・実装）

Edgeの正しい設計順序はこれです。
	1. どの工場領域をひとまとまりとして扱うか（スコープ）
	2. その領域を誰がメンテするか（運用責任）
	3. 領域内の意味体系をどう表現するか（セマンティクス）
	4. 正規化・差異吸収・意味変換をどう行うか（設計）
	5. どの技術で実装するか（プロトコル・ハード）

多くのDXプロジェクトは 4 から入りますが、工場は必ず 1 と 2 が先です。

◆ 第5話のまとめ
	• Edgeは「領域を受け持つ装置」
	• 領域をまとめる単位は業務要件そのもの
	• Edgeは単一故障点 → だから領域の切り方が最重要
	• そして“誰がメンテするか”を決めなければ必ず破綻する
	• 領域・責任・意味の順で設計し、最後に技術が来る
	• 次回の「Flow」は、この領域設計が前提となる

**次回（6/10）
データバス設計（Flow）
—— データは“置く”ではなく“流し、途切れさせない」**

データバス設計（Flow）
—— データは「置く」のではなく「流し方と揺れ方」を設計する
（工場DXアーキテクチャ　実践編 　6/10）
工場DXのアーキテクチャで、
「データバス（MQTT / Kafka など）」は必須ではありません。
極端な話をすれば、
	Edge がそのまま DB に書けばシステムは成立します。
実際、その構成でスタートすることも多いはずです。
しかし、工場の現実と長期運用を考えると、
どこかのタイミングで必ず苦しくなります。
なぜか。

◆ 工場データは「広い範囲」かつ「違うリズム」で生まれている
工場データは、
単に「たくさんある」のではなく、
違う軸でバラバラに生まれています。
ざっくり分解すると、こうなります。
① 時間軸（Time）
	• ワンショット：ある瞬間だけ意味を持つ値（条件判定・イベント）
	• 連続時系列：温度・圧力・流量など、継続的に変化する値
② レイヤ軸（Layer）
	• 設備寄り：センサー近傍、制御モード、インターロック
	• 業務寄り：ロット、オーダ、段取り、品質判定
③ 収集方式（Collection）
	• ストリーム：常時流れ続けるデータ
	• バッチ：一定周期でまとめて取る / 集計して取る
これらが 掛け算で組み合わさる ので、
	• 設備寄り × 連続 × ストリーム
	• 設備寄り × ワンショット × バッチ
	• 業務寄り × イベント × バッチ
…など、パターンが無数に生まれます。
ここで素朴に考えると：
	「じゃあ、それぞれにテーブルを作ればいいのでは？」
となりがちですが、
この発想で進めると必ず破綻します。

◆ Edge → DB 直結構成は、どこで苦しくなるのか
データバスを挟まずに、
「Edge がそのまま DB に書く」構成は一見シンプルです。
しかし工場の現実を入れると、次の問題が出ます。

1. DBと密結合になり、IT側の「変化」が封じられる
	• スキーマを変えたい
	• 保存先を変えたい
	• アーカイブ方式を変えたい
	• クラウド側を止めてメンテしたい
こういった IT側の“変化” が、
EdgeとDBが直結していることで極端に難しくなります。
	ITは変化させたいが、
	変化させると現場が止まるので「止められなくなる」。
結果として、
	• 古いスキーマが延命され続ける
	• 容量だけ増える
	• 新しい用途に対応できない
という “変化できないシステム” が生まれます。

2. 収集間隔と停止復旧のロジックが「バラバラに増殖」する
工場には領域（スコープ）があり、
その中にあるローカル機器は 必ず止まります。
	• ネットワーク断
	• メンテナンス
	• 電源断
	• 再起動
	• 点検
止まったあとには、
	• 欠損の検知
	• 再取り込み（リトライ）
	• 遡り収集
	• 重複の排除
といった 回復処理（リカバリ） が必要です。
これを 個々の Edge → DB 直結の中でバラバラに実装 すると、
	「あの領域はこうリトライ」
	「あの設備はこう埋める」
	「あのラインだけ特殊ルール」
という具合に、
無数の“個別リカバリ処理”が工場中に生まれます。
一度こうなってしまうと、
誰も全体像を把握できなくなり、
障害時に「どこまで直せば正常なのか」が追えなくなります。

◆ データバスの本質は
「収集間隔」と「停止・復旧」の“揺れ方”を揃えること
ここで、データバスの役割が見えてきます。
	データバスは、意味を変える場所ではなく
	“収集のリズム”と“壊れ方・直り方”を揃える場所。
もう少し分解すると：

● 収集間隔を揃える（Time Normalization）
	• 1秒周期の連続データ
	• 1分集計の指標
	• ロット完了時イベント
	• 日次バッチの品質集計
これらを、
	• どの粒度で
	• どのタイミングで
	• どの単位として
上位に流すかを 一度、Flow層で決める。
→ TSDB/RDB側は「決められたリズム」で流れてくる前提で設計できる。

● 停止・復旧の扱いを揃える（Failure Pattern）
	• 一時停止したらどうするか
	• バッファはどこまで持つか
	• 再開時にどこから取り直すか
	• 欠損は欠損として残すのか、埋めるのか
これを “バスとしての共通ルール” にしておく。
→ 各工場領域・各システムで
　バラバラのリカバリロジックを書かなくて済む。

● 領域ごとの「ローカルな止まり方」を一段上で受け止める
第5話で触れたように、工場には領域があります。
	• ある領域のEdgeが止まる
	• ローカル機器が落ちる
	• 一部ラインだけ止まる
この “止まり方” を、そのまま上位に伝播させるのではなく、
	領域内の揺れを一度バスが受け止め、
	上位には“再現性のある揺れ方”として見せる。
これがデータバス設計の本質です。

◆ データバスは「業務データの意味」には触らない
重要なのはここです。
	データバスは、業務面の「意味」には触ってはいけない。
	• ロットの意味
	• 品質判定の意味
	• 工程ステータスの意味
	• 業務イベントの解釈
こういった 業務の意味そのもの は、
業務・アプリ側や、意味付けを行うレイヤ（Edge/IT）で扱うべき領域です。
Flow層はあくまで、
	• いつ
	• どのくらいの粒度で
	• どの揺れ方で届くか
を保証するだけの存在。
「道路」は、上を走る車の用途や目的を変えない のと同じです。

◆ まとめ：データバスは“必須機能”ではないが、
“無数の個別対処”を防ぐための「再現性エンジン」になる
整理すると：
	• Edge→DB直結でもシステムは作れる
	• しかし
		○ 収集間隔
		○ 停止・復旧
の扱いに再現性がないと、
工場中に「個別リカバリ処理」が増殖する
	• データバスは
		○ 収集のリズム
		○ 止まり方・直り方
を“一本のルール”で揃える装置
	• 業務の意味には触れない
→ 意味は Edge/業務アプリ側で扱う
→ バスは「長く、揺れながら流れる工場データ」を
　 再現性をもって上位に渡す役割

◆ 第6話の位置づけ
	• 第5話：領域ごとに“意味を整える” Edge
	• 第6話：領域を越えて“揺れを整えて流す” Flow
	• 第7話：Flowを受け止めて“長期保存と再計算を担う” TSDB
この3つがそろって初めて、
工場DXの「意味 × 流れ × 保存」が一貫したアーキテクチャ になります。

次回 #7 では、
この Flow を受け止める側としての TSDB設計（粒度・窓・保持・再計算） に進みます。
ここまでの「意味」「領域」「Flow」が、どのようにストレージ設計に効いてくるかを整理します。

TSDB設計の本質
—— Flowを受け止め、「過去を再現できる状態」を作る
（工場DXアーキテクチャ 実践編 7/10）
 
第6話では、
データバス（Flow）は意味を扱う層ではなく、
収集のリズムと、止まり方・直り方の揺れを揃えて流す層だ、と整理しました。
 
では、その 揃えられた Flow を、どこで・どのように受け止めるのか。
 
この問いに答えるのが、保存層（ストレージ）の設計です。
 
◆ 保存層は「データの終着点」ではない
工場DXでは、保存層を
「とりあえず溜める場所」として設計してしまうことがあります。
 
確かに、
・Edge → DB 直結
・Flow → RDB
でも、最初は動きます。
 
しかし Flow を正しく設計すると、
保存層は次の現実を引き受けることになります。
・データは遅れて届く
・欠ける
・後から補正される
・粒度が混在する
・それが年単位で積み上がる
 
保存層は、
「整ったデータ」ではなく
「揺れたままの現実」を
過去に遡って再現できる形で保持する役割を担うことになります。
 
◆ RDBとTSDBの違いは「性能」ではない
最初に断っておきます。

工場データは RDB にも保存できます。
小規模・短期間・用途限定であれば、RDBだけで問題ないケースも多い。
 
違いが出るのは、Flowを前提にした長期運用です。
 
◆ Flow前提で見ると、RDBが苦しくなりやすい理由
① 揺れが増えるほど、更新ロジックが増殖する
・遅延データ
・再送
・補正
・再計算
 
これらをRDBで扱うと、
・update / merge が増える
・スキーマと処理が密結合になる
・設計意図が時間とともに読めなくなる
 
② 「意味」と「流れ」を同じ器に背負わせることになる
工場データは、
・工程・設備・ロットといった 意味
・時間と連続性という 流れ
の両方が重い。
 
RDBは意味に強い反面、Flowで揃えた揺れまで同時に扱うと、
設計と運用の難易度が一気に跳ね上がります。
 
③ 過去を再現するために“設計理解”が必要になる
「この期間、何が起きていたか」を確認するだけでも、
JOINや条件が複雑になり、“設計を知っている人しか触れないDB”になりがちです。
 
◆ TSDBは「揺れたFlowを、そのまま受け止めやすい器」
TSDBは万能ではありません。
ただし、設計思想がFlowと噛み合っています。
 
TSDBが得意なのは
・時間軸前提の格納
・遅延・再送を前提にした取り込み
・粒度混在の自然な扱い
・期間単位での保持と破棄
・後からの補正・再計算
・時系列窓での高速参照
 
言い換えると
 TSDBは
 「揺れたまま流れてきたデータ」を
 無理に正さず、
 過去に遡って再現できる形で保持するための器
です。
 
◆ 工場DXでは「RDB × TSDB」の分業が自然に落ち着く
近年の工場DXでは、次の分担が多くなっています。
TSDB
 → Flowを通った時系列データ
 → 流れ・揺れ・履歴
RDB
 → 設備構造、工程、ロット、属性
 → 意味と文脈
 
これにより、
・意味変更に強い（RDB）
・揺れに強い（TSDB）
という 責務分離 が成立します。
 
◆ TSDB設計は「AI以前の前提条件」である
ここが、この話の核心です。
 過去の状態を再現できないデータに、
 AIが一貫した判断を下すことはできません。

・学習データと現在の意味がずれる
・工場ごとに判断基準が変わる
・改善の影響が追えない
 
TSDBは、AIのためのDBではありません。
しかし、AIが成立するための「過去の地盤」を作るのは、
この保存層です。
 
◆ まとめ：保存層はFlowの思想を引き継ぐ
整理すると
・Flowは、収集のリズムと揺れを揃えて流す層
・保存層は、その揺れを 過去に遡って再現できる形で保持する層
・RDBは意味に強い
・TSDBは流れと揺れに強い
この分離が、長期運用と次工程（AI）を支える
 
◆ 次回予告（第8話）
次回 #8 では、
この 「意味 × 流れ × 再現性」 が揃った前提で、
・AIをどこに置くのか
・何を任せ、何を任せてはいけないのか
というAI連携の正しい順番と境界設計 に進みます。
 
AIはもちろん魔法ではなく、成立させる順番がある技術です。

OT × IT × Data の交差点に興味ある方にご参考になればと思います。

===
ハッシュタグ#工場DX
ハッシュタグ#OTとIT
ハッシュタグ#データ基盤
ハッシュタグ#製造業DX

✦ 工場DXアーキテクチャ　実践編（全10話）
✦ 過去投稿はプロフィールから見れます
✦ 個人の発信です。所属する会社・組織の意向・情報ではありません。

AI連携の正しい順番
—— AIは“どこに置き、何を任せるか”を決めるアーキテクチャ行為
（工場アーキテクチャ 実践編　8/10）

工場DXでは、
「データが揃っていない状態のまま、AIを使いたい」 という要望から話が始まることが多くあります。

しかし、AIは“最初に置く技術”ではなく、
基盤が整ったうえで初めて価値を出せる“配置の問題” です。
結論から言えば、
　AIが成果を出せるかどうかは、モデルよりも“基盤側の前提”で決まります。

◆ AIが期待通りに動かない理由の多くは、モデルではない
現場でよくある課題：
	• 工場ごとに異なる学習データ
	• 設備更新のたびに再学習が必要
	• 改善の影響でラベル基準が変わる
	• 時系列の揺れ（遅延・欠損・補正）が吸収できない
	• 過去データの再現性がない

この状態でAIを導入すると、
　局所的なAIモデルが大量に生まれて、維持不能になります。

原因は単純で、データの意味と揺れが工場ごとに異なるため です。

◆ 工場データの“意味”は上位レイヤで成立する
—— AIを局所的に置いても、構造上うまくいかない
同じ温度でも、工程が違えば正常範囲が変わります。
同じ信号でも、段取り条件やロットで意味が変わります。

つまり、設備単体には、AIが判断するための“文脈（意味）”が存在しない。

だからローカルAIだけでは再現性が確保できません。
意味は Edge・RDB・業務レイヤといった“上位構造”で初めて確定するためです。

◆ AIは「技術選択」ではなく、境界設計の一部である
AIをどこに置くべきかは、技術的な流行では決まりません。
決まるのは次の問いです：
	• どのレイヤで意味を確定させるのか
	• どの境界からどこまでをAIに判断させるのか
	• 逆にAIに踏み込ませてはいけない領域はどこか
	• AIの入力と出力を誰が受け取り、どの業務に載せるのか

これは、“AIの境界を設計する”ことそのものです。

◆ AIの前に、整えるべき順番がある
AIは後工程です。
先に整えるべきは以下の順番になります：
	1. 領域（スコープ）を切る（#5 Edge）
	2. データの揺れ方を揃える（#6 Flow）
	3. 過去の再現性を確保する（#7 TSDB）
	4. 意味 × 流れ × 再現性 が揃ったところで AI を載せる
この順番が整うと、モデルの精度よりも 再現性と維持性 が高くなります。

◆ 今回のまとめ
	• AIが失敗する理由の多くは、モデルではなく 基盤側の前提
	• 順番を誤ると、工場ごとに 局所モデルが乱立し、維持不能
	• 工場データの“意味”は上位レイヤで成立するため、局所AIは本質的に限界がある
	• AI導入は、技術選定ではなく 境界のどこに置き、何を任せるか の設計
	• 「領域 → Flow → TSDB → AI」という順番が自然に安定する

◆ 最終メッセージ
	AIは単独で価値を生まない。
	意味・揺れ・再現性が整った“境界設計の先”に初めて成立する。
	どこにAIを置き、何を任せるのか——それが工場DXの設計である。


境界を守るプロジェクト設計プロセス
—— 責務ではなく「面 × 機能 × ライフサイクル」を揃える
 （工場アーキテクチャ 実践編 9/10）

工場DXのプロジェクトは、
 技術が足りなくて失敗することは、実はあまりありません。
 ・Edgeも作った。
 ・DBも用意した。
 ・AIも試した。

それでも運用に入った途端、
 「なぜか噛み合わない」「変更が異常に重い」「誰も全体を説明できない」
 ——そんな状態に陥る事があります。

原因を辿ると、多くの場合、技術ではなく“境界”が壊れています。

ただし誤解されがちなのは、
境界＝責任分担の話ではない、という点です。

境界とは
意味が変わる場所、目的が変わる場所、揺れ方が変わる場所であり、
工場DXではこれが複数の方向に同時に存在します。

◆ 工場DXは「面 × 機能 × ライフサイクル」の3次元構造で動いている
●工場にはまず 面（領域） があります。
A工程・B工程・設備群・ライン・棟など、現場の物理と運用で決まる単位です。

●一方、システムは 機能軸 で作られます。
 Edge、Flow、TSDB、RDB、AI、API…。

●さらにプロジェクトは
 要件定義 → 設計 → テスト → 導入 → 運用 → 保守
 という ライフサイクル（時間軸） で進みます。

つまり工場DXは、次の3つが同時に存在する世界です。
・面（領域）：どこを扱うか
・機能（システム）：どう処理するか
・ライフサイクル（時間）：いつ固定・検証するか

この3つが揃って、はじめて境界が安定します。

◆ 3つがズレると、境界は必ず崩れる
● 面 × 機能 のズレ
Edgeがどこまでを受け持つか曖昧
面ごとに意味が変わり、AIや分析が再現できない

● 機能 × ライフサイクル のズレ
要件で想定されていない揺れがテストで噴出
導入後の変更が、機能境界をまたいで爆発的に重くなる

● 面 × ライフサイクル のズレ
導入時は成功しても、運用で解釈がズレ始める
改善・設備更新・ローカル変更に耐えられず破綻する

つまり、
 境界が壊れるのは誰かの責任ではなく、
 設計する次元が揃っていない からです。

◆ フェーズごとに固めるべき境界は違う
 要件定義：面を切り、意味の境界を決める
 設計：揺れ方・再現性の境界を決める（Flow / TSDB）
 テスト：面ごとの揺れと用途を前提に検証する
 導入：面単位で止まったときの影響範囲を把握する
 運用：面ごとに「誰がどこを保守するか」を固定する

プロジェクトとは、
 この3次元の境界を、時間軸に沿って整合させ続ける行為 に他なりません。

◆ 今回のまとめ
境界は責任ではなく「意味・揺れ・制御・継続性」が変わる場所

工場DXは「面 × 機能 × ライフサイクル」 の3次元構造

そして最も重要なのは、それらをどの順番で固定するか

この3つが揃わない限り、プロジェクトは必ず揺れる

◆ 最終メッセージ
工場DX成功の本質は、新しい技術を選ぶことではありません。

 面 × 機能 × ライフサイクル

この3次元の境界を、どの順番で、どこまで固めるのか。

それを設計できたとき、
プロジェクトは初めて「揺れなく」なります。

OT × IT × Data の交差点に興味ある方にご参考になればと思います。

===
ハッシュタグ#工場DX
ハッシュタグ#OTとIT
ハッシュタグ#データ基盤
ハッシュタグ#製造業DX

✦ 工場DXアーキテクチャ　実践編（全10話）
✦ 過去投稿はプロフィールから見れます
✦ 個人の発信です。所属する会社・組織の意向・情報ではありません。

理想と現実のトレードオフを解くアーキ思考
—— 技術ではなく“置き場所”がシステムの未来を決める
（工場アーキテクチャ 実践編 10/10・最終回）

本シリーズでは、工場DXのさまざまな要素
（Edge、Flow、TSDB、AI、情報モデル…）を扱ってきました。

しかしここで改めて強調したいのは、
　私はどの技術も否定していない。
　すべての技術は“置き場所”によって価値が変わるだけで、
　本質的に間違った技術など存在しない。

この“レイヤーの違い”を理解しないと、
理想（こうありたい）と現実（こうしかできない）がぶつかったとき、
判断がブレるようになります。

逆に、レイヤーが見えていると、
どんな技術を使っても“破綻しないシステム”が作れるようになります。

◆ 技術そのものではなく、「どこに置くか」がすべてを決める
MQTTでもKafkaでも、TSDBでもRDBでも、AIでも、
本来 どれを選んでも成立する のがアーキテクチャです。

問題は技術選定ではなく、
	• どのレイヤーに置くのか
	• どこまでの“意味”をそのレイヤーで扱うのか
	• どの境界を越えさせないのか
	• どのレイヤーと結びつけてはいけないのか
	• 変化したときにどの層が吸収するのか
という 配置の問題 です。

この配置が誤ると、どんな優れた技術も“正しく動けない環境”に閉じ込められます。

◆ 理想と現実は対立しない
—— レイヤーを揃えると両立し始める
工場DXには常に「理想」と「現実」が存在します
	• 理想：揃ったデータ基盤
	• 現実：揃わない設備と改善サイクル
	• 理想：ひとつの意味体系
	• 現実：現場ごとに違う文脈
	• 理想：止まらないシステム
	• 現実：止まる前提のローカル機器
	• 理想：AIが価値を出す構造
	• 現実：意味・揺れ・再現性の差異
この“矛盾”を力技で解決しようとすると、システムは複雑化し、運用が破綻します。

しかし、アーキ思考ではこう考えます
　矛盾そのものを無くすのではなく、
　“矛盾が吸収されるレイヤー”を決める。
これがトレードオフを解く鍵です。

◆ アーキ思考とは「どの矛盾をどの層に閉じ込めるか」の判断である
たとえば：
	• 揃わなさ → Edgeが吸収
	• 揺れ → Flowが吸収
	• 長期整合性 → TSDBが吸収
	• 意味の変化 → RDBが吸収
	• 現場の改善 → 面（領域）が吸収
	• モデルの揺れ → AIの上位レイヤで吸収
すべては “どこが吸収するか” を決める設計です。

つまりアーキテクチャとは、
　技術の組み合わせではなく、
　変化と矛盾の“引き受け先”を決める行為。
これができれば、技術が何に変わっても設計の骨格は揺れません。

◆ 結局、工場DXは「境界設計」の積み重ねである
第1話で扱った“境界”の話が、ここで再び返ってきます。
	• 面の境界
	• 意味の境界
	• 揺れの境界
	• 再現性の境界
	• 制御の境界
	• 継続性の境界
	• AIの境界
	• プロジェクトフェーズの境界

これらが揃うと、システムは自然に安定し、長期間動き続けます。
逆に揃わないと、どんなに理想的なアーキを描いても、現場で剥がされて終わります。

◆ 最終メッセージ
—— 工場DXを支えるのは「技術」ではなく「レイヤーを見る目」
技術の優劣ではなく、技術がどのレイヤーで価値を持つかを判断する目。

この目があれば、
新しい仕組みに置き換わっても、
どんな工場でも、
どんな時代でも、
安定して価値を生み出せる構造が作れるはずです。
　工場DXの本質は、技術ではなく“どこに置くか”を決めるアーキテクチャである。
　理想と現実の間に橋を架けるのが、アーキテクトの仕事である。

【Bonus】境界と価値
—— 技術ではなく“価値の流れ”を設計する
（工場アーキテクチャ 実践編・補遺）**
この10話のシリーズで扱ってきた内容は、
Edge や Flow、TSDB、AI といった“技術”の話にも見えます。
しかし本当に伝えたかったのは、
技術の優劣ではありません。
	工場DXとは、技術を選ぶことではなく、
	“価値が流れ続ける構造”を設計する行為だということです。

◆ 価値は、境界を正しく設計したときにだけ流れ続ける
工場の価値とは何か？
	• 安全に動き続けること
	• 設備と工程が目的どおりに機能すること
	• 現場改善が循環すること
	• データが意味を持ち続けること
	• 判断が現場と矛盾しないこと
これらはすべて、
境界が正しく設計されているかどうか に依存します。
境界とはつまり、
	• どこで意味が変わるか
	• どこで揺れを吸収するか
	• どこから業務が始まるのか
	• どこで責務が切り替わるのか
	• どの層が変化を引き受けるのか
という 価値の流れを守る“構造のライン” のことです。

◆ 技術は常に入れ替わる。価値の流れは残り続ける。
MQTT も、Kafka も、TSDB も、AI も、
十年後には別の技術に置き換わっているかもしれません。
しかし工場では、技術が変わっても変わらないものがあります。
それは、
	• 意味の所在
	• 揺れの吸収点
	• 面（領域）という物理的制約
	• 現場の改善サイクル
	• 設備更新という不可避のイベント
	• 安全と継続運転という最優先価値
つまり “価値の流れ方”そのものは変わらない ということです。
だからアーキテクチャは、
特定の技術ではなく、価値の流れに合わせて設計されるべき なのです。

◆ 技術を選ぶのではなく、価値の流れに合わせて“置く”
技術は良し悪しではなく“位置”で決まります。
	• Edge に置く意味
	• Flow に置く意味
	• TSDB に置く意味
	• AI に置く意味
	• SCADA を越境させない意味
これらはすべて 価値の流れに合わせて配置されるべきもの です。
どれだけ優れた技術でも、
価値の流れと無関係な場所に置けば動けなくなります。
逆に言えば、
価値の流れに合った場所に置けば、
どんな技術でも安定した成果を生み出せます。

◆ 工場DXは「価値の流れ」を守り続けるための構造設計である
DXは革命でも刷新でもありません。
	変化し続ける現場の中で、
	価値を途切れさせないための“境界設計”である。
設備が変わっても、
人が変わっても、
技術が入れ替わっても、
目的の価値が揺れずに流れ続ける。
この構造を作ることこそ、
アーキテクチャの本質です。


◆ 最後に

—— このシリーズが一貫して示してきたこと

技術ではなくレイヤーを見ること。
レイヤーではなく価値を見ること。
価値を守るために境界を設計すること。

この3つが揃ったとき、

工場が違っても

技術が変わっても

時代が移り変わっても

価値は途切れずに流れ続けます。

工場DXとは、
派手な技術の話ではありません。

価値の流れを、長く守り続けるための構造設計である。


補遺のあとがき

—— 境界と価値の話の、その先へ

本Bonusでは、
このシリーズ全体の背後にあった
「価値の流れ」と「境界」 の考え方を整理しました。

実際の工場で、
価値の流れが本当に試されるのは、
設計図を描いた瞬間ではありません。

実装段階での細かな判断

運用の中での地味な割り切り

そして「やらない」と決める選択の積み重ね

こうした日々の判断の中で、
設計の良し悪しは、あとから静かに現れてきます。

本シリーズでは、
そうしたエンジニアリングや運用の話を
あえて前面には出していません。

それは重要でないからではなく、
価値の流れが共有されていない状態では、
それらの話が意味を持ちにくいからです。

価値の流れが腹落ちし、
境界の意味が体感として見えてきたとき、
はじめて語れる話があります。

その続きについては、
また別の文脈で触れることにします。